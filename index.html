<!DOCTYPE html>
<html lang="fr">
<head>
<link href="https://fonts.googleapis.com/css2?family=PT+Sans+Narrow&display=swap" rel="stylesheet">

<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet">




  <meta charset="UTF-8" />
  <title>Calendrier MAGIQUE pour EMILIE</title>
  <style>
    body {
      background: url("image/traineau.jpg") no-repeat center center fixed;
      background-size: cover;
      margin: 0;
      padding: 0;
      font-family: PT sans Narrow;
    }

    h1 {
      text-align: center;
      margin: 20px;
      color: white;
      text-shadow: 2px 2px 5px black;
      position: relative;
      z-index: 20;
    }

    #calendrier {
      display: grid;
      grid-template-columns: repeat(6, 100px);
      gap: 15px;
      justify-content: center;
      margin: 20px auto;
      position: relative;
      z-index: 50;
      width: min(800px, 95vw);
    }

    .porte {
      width: 100px;
      height: 100px;
      perspective: 600px;
      position: relative;
      z-index: 51;
    }

    .porte-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.8s ease;
      transform-style: preserve-3d;
      cursor: pointer;
      will-change: transform;
    }

    .porte.ouverte .porte-inner {
      transform: rotateY(180deg);
    }

    .porte-face {
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .porte-devant {
      background: crimson;
      position: relative;
      overflow: hidden;
      border: 2px solid rgba(255,255,255,0.7); /* rend les cases visibles */
    }

    .porte-devant img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: contrast(1.05) saturate(1.05);
    }

    .numero {
      position: absolute;
      top: 6px;
      left: 8px;
      font-size: 30px;
      font-weight: bold;
      color: gold;
      text-shadow: 2px 2px 4px black;
      z-index: 2; /* au-dessus de l'image */
      pointer-events: none;
    }

    .porte-arriere {
      background: white;
      color: black;
      transform: rotateY(180deg);
      font-size: 13px;
      text-align: center;
      padding: 8px;
      line-height: 1.2;
    }


    .magie {
        display: inline-block;
        opacity: 0;
        animation: apparition 2s ease forwards, scintillement 2s infinite alternate;
    }

@keyframes apparition {
  from { opacity: 0; transform: scale(0.9); }
  to { opacity: 1; transform: scale(1); }
}



    /* Finale */
    #finale {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      text-align: center;
      z-index: 200;
      animation: fadeIn 0.6s ease forwards;
    }

    #finale h1 {
      font-family:'Great Vibes', cursive;
      margin-top: 20%;
      margin:0;
      font-size: 2.5em;
      color: gold;
      text-shadow: 2px 2px 5px red;
      animation: scintillement 1.5s infinite alternate;
    }

#finale .finale-texte {
  font-family: 'Great Vibes', cursive; /* police magique */
  color: #fff;
  text-shadow: 0 0 8px gold, 0 0 15px #ff99ff; /* halo lumineux */
  margin: 0;
  line-height: 1.4;
}








    @keyframes scintillement {
      from { opacity: 0.6; text-shadow: 0 0 10px gold; }
      to { opacity: 1; text-shadow: 0 0 20px red, 0 0 30px gold; }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    canvas#fireworks {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 201;
    }

    canvas#snow-canvas {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1;
    }


@keyframes glow {
  from { text-shadow: 0 0 5px gold; }
  to { text-shadow: 0 0 20px red, 0 0 30px gold; }
}

@keyframes flicker {
  0% { opacity: 1; }
  50% { opacity: 0.6; }
  100% { opacity: 1; }
}



  </style>
</head>
<body>
  <h1>ğŸ„ Calendrier magique EMILIE ğŸ„</h1>
  <div id="calendrier"></div>

  <!-- Finale -->
  <div id="finale">
  <h1> âœ¨ Joyeux NoÃ«l Emilie ! âœ¨<br>
  <h1> âœ¨ et bonnes vacances ! âœ¨</h1>
  </h1>
    <audio id="musique" src="son/noel.mp3" preload="auto"></audio>
    <canvas id="fireworks"></canvas>
  </div>

  <!-- Sons -->
  <audio id="clochettes" src="son/clochettes.mp3" preload="auto"></audio>

  <!-- Neige -->
  <canvas id="snow-canvas"></canvas>




<script>
const calendrier = document.getElementById("calendrier");


const contenus = [
  "<span class='magie'>â„ï¸ Devinette 1 : Quâ€™est-ce qui fond sans jamais pleurer ? (la neige)</span>",
  "<span class='magie'>ğŸ¤” Devinette 2 : Quâ€™est-ce qui a des clÃ©s mais ne peut pas ouvrir de portes ? (un piano)</span>",
  "<span class='magie'>ğŸ Devinette 3 : Quâ€™est-ce qui monte mais ne redescend jamais ? (lâ€™Ã¢ge)</span>",
  "<span class='magie'>ğŸŒŸ Devinette 4 : Quâ€™est-ce qui brille sans feu ? (les Ã©toiles)</span>",
  "<span class='magie'>ğŸ„ Devinette 5 : Quâ€™est-ce qui est toujours devant toi mais que tu ne peux jamais voir ? (le futur)</span>",
  "<span class='magie'>ğŸ•¯ï¸ Devinette 6 : Quâ€™est-ce qui est plein de trous mais retient lâ€™eau ? (une Ã©ponge)</span>",
  "<span class='magie'>ğŸ… Devinette 7 : Quâ€™est-ce qui court mais nâ€™a pas de jambes ? (lâ€™eau)</span>",
  "<span class='magie'>ğŸª Devinette 8 : Quâ€™est-ce qui est lÃ©ger comme une plume mais personne ne peut le tenir longtemps ? (le souffle)</span>",
  "<span class='magie'>ğŸ˜‚ Devinette 9 : Quâ€™est-ce qui a un cou mais pas de tÃªte ? (une bouteille)</span>",
  "<span class='magie'>âœ¨ Devinette 10 : Quâ€™est-ce qui a un cÅ“ur mais ne bat pas ? (un artichaut)</span>",
  "<span class='magie'>ğŸ¶ Devinette 11 : Quâ€™est-ce qui est invisible mais te suit partout ? (ton ombreâ€¦ quand il fait nuit)</span>",
  "<span class='magie'>ğŸ’Œ Devinette 12 : Quâ€™est-ce qui est Ã  toi mais que les autres utilisent plus que toi ? (ton prÃ©nom)</span>",
  "<span class='magie'>â„ï¸ Devinette 13 : Quâ€™est-ce qui peut voyager autour du monde en restant dans un coin ? (un timbre)</span>",
  "<span class='magie'>ğŸ¤” Devinette 14 : Quâ€™est-ce qui a des dents mais ne mord pas ? (un peigne)</span>",
  

"<video controls   width='250'>\
  <source src='video/devinettesapin.mp4' type='video/mp4'>\
  Ton navigateur ne supporte pas la vidÃ©o.\
</video>",


 "<span class='magie'>ğŸ¤” Devinette 16 : Quâ€™est-ce qui a des dents mais ne mord pas ? (un peigne)</span>",
 
 
  "<video controls   width='250'>\
  <source src='video/enigme17.mp4' type='video/mp4'>\
  Ton navigateur ne supporte pas la vidÃ©o.\
</video>",
  
 
  
  
  
  "<span class='magie'>ğŸ¶ la solution de l'enigme d'hier est : Son frÃ¨re aura toujours 10 ans de moins donc il aura 60 ans. (un dÃ©)</span>",

  "<video controls   width='250'>\
  <source src='video/enigme19.mp4' type='video/mp4'>\
  Ton navigateur ne supporte pas la vidÃ©o.\
</video>",



  "<span class='magie'>ğŸ“œ La rÃ©ponse Ã  la devinette d'hier est 2462 ! ho ho ho </span>",

 "<video controls   width='250'>\
  <source src='video/enigme21.mp4' type='video/mp4'>\
  Ton navigateur ne supporte pas la vidÃ©o.\
</video>",



  "<span class='magie'>ğŸ’– Solution : Il y a minimum 5 soeurs.. </span>",



"<video controls   width='250'>\
  <source src='video/jour23.mp4' type='video/mp4'>\
  Ton navigateur ne supporte pas la vidÃ©o.\
</video>",

 
  "ğŸ† La grande finale avec musique et feux dâ€™artifice ğŸ‡"
];




for (let jour = 1; jour <= 24; jour++) {
  const porte = document.createElement("div");
  porte.className = "porte";

  const inner = document.createElement("div");
  inner.className = "porte-inner";

  const devant = document.createElement("div");
  devant.className = "porte-face porte-devant";

  const img = document.createElement("img");
  img.src = "image/perenoel.jpg";
  img.alt = "PÃ¨re NoÃ«l";
  devant.appendChild(img);

  const numero = document.createElement("span");
  numero.className = "numero";
  numero.textContent = jour;
  devant.appendChild(numero);

  const arriere = document.createElement("div");
  arriere.className = "porte-face porte-arriere";
  arriere.innerHTML = contenus[jour - 1] || "";


  inner.appendChild(devant);
  inner.appendChild(arriere);
  porte.appendChild(inner);

 // On rÃ©cupÃ¨re la vidÃ©o UNE SEULE FOIS
const video = porte.querySelector("video");

// Ã‰vÃ©nement de fin de vidÃ©o (dÃ©fini une seule fois)
if (video) {
  video.onended = () => {
    video.pause();
    video.style.display = "none";
    porte.classList.remove("ouverte");
  };
}

porte.onclick = () => {
  porte.classList.toggle("ouverte");

  if ([15, 17, 19, 21].includes(jour)) {
    setTimeout(() => {
      if (video) {
        // Affiche la vidÃ©o
        video.style.display = "block";

        // Repart du dÃ©but
        video.currentTime = 0;

        // Lecture
        video.play();
      }
    }, 400);
  
};

    if (jour === 24) {
      lancerFinale();
      
    } else {
      jouerClochettes();
    }

    

  };

  calendrier.appendChild(porte);
}

// Sons
function jouerClochettes() {
  const clochettes = document.getElementById("clochettes");
  try {
    clochettes.currentTime = 0;
    clochettes.play();
  } catch (e) {
    // Certains navigateurs exigent une interaction utilisateur prÃ©alable
  }
}

// Finale
function lancerFinale() {
  const overlay = document.getElementById("finale");
  overlay.style.display = "block";
  const musique = document.getElementById("musique");
  try {
    musique.currentTime = 0;
    musique.play();
  } catch (e) {}

  const canvas = document.getElementById("fireworks");
  const ctx = canvas.getContext("2d");
  resizeCanvas(canvas);

  function Firework(x, y, colors) {
    this.particles = [];
    for (let i = 0; i < 60; i++) {
      this.particles.push({
        x, y,
        dx: (Math.random() - 0.5) * 6,
        dy: (Math.random() - 0.5) * 6,
        life: 100,
        colors
      });
    }
  }
  Firework.prototype.draw = function() {
    this.particles.forEach(p => {
      ctx.globalAlpha = p.life / 100;
      ctx.fillStyle = p.colors[Math.floor(Math.random()*p.colors.length)];
      ctx.fillRect(p.x, p.y, 2, 2);
      p.x += p.dx;
      p.y += p.dy;
      p.life--;
    });
    ctx.globalAlpha = 1;
  };

  const fireworks = [];
  const spawn = setInterval(() => {
    fireworks.push(new Firework(
      Math.random()*canvas.width,
      Math.random()*canvas.height/2,
      ["red","gold","white","green"]
    ));
    // Nettoyage des vieux feux
    if (fireworks.length > 30) fireworks.splice(0, 10);
  }, 900);

  function animate() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    fireworks.forEach(f => f.draw());
    requestAnimationFrame(animate);
  }
  animate();

  window.addEventListener('resize', () => resizeCanvas(canvas));
  function resizeCanvas(cnv) {
    cnv.width = window.innerWidth;
    cnv.height = window.innerHeight;
  }
}

// Neige
(function() {
  const canvas = document.getElementById('snow-canvas');
  const ctx = canvas.getContext('2d');
  resizeSnow();

  const flakes = [];
  const FLAKE_COUNT = 120;

  function rand(min, max) { return Math.random() * (max - min) + min; }

  for (let i = 0; i < FLAKE_COUNT; i++) {
    flakes.push({
      x: rand(0, canvas.width),
      y: rand(0, canvas.height),
      r: rand(1, 4),
      d: rand(0.6, 1.8),
      drift: rand(0, Math.PI*2)
    });
  }

  function drawFlakes() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "rgba(255,255,255,0.85)";
    ctx.beginPath();
    for (let i = 0; i < FLAKE_COUNT; i++) {
      const f = flakes[i];
      ctx.moveTo(f.x, f.y);
      ctx.arc(f.x, f.y, f.r, 0, Math.PI * 2, true);
    }
    ctx.fill();
    updateFlakes();
  }

  function updateFlakes() {
    for (let i = 0; i < FLAKE_COUNT; i++) {
      const f = flakes[i];
      f.y += f.d;
      f.drift += 0.02;
      f.x += Math.sin(f.drift) * 0.5; // lÃ©ger mouvement latÃ©ral
      if (f.y > canvas.height + 5) {
        flakes[i] = { x: rand(0, canvas.width), y: -5, r: f.r, d: f.d, drift: rand(0, Math.PI*2) };
      }
      if (f.x < -5) f.x = canvas.width + 5;
      if (f.x > canvas.width + 5) f.x = -5;
    }
  }

  setInterval(drawFlakes, 30);
  window.addEventListener('resize', resizeSnow);

  function resizeSnow() {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
  }


document.querySelectorAll(".day").forEach(day => {
  day.addEventListener("click", () => {
    const num = day.textContent.trim();
    if (num === "15") {
      document.getElementById("content").innerHTML = `
        <video controls   width="640">
          <source src="video/video15.mp4" type="video/mp4">
        </video>
      `;
    } else {
      document.getElementById("content").innerHTML = "Devinette " + num + " : ...";
    }
  });
});




  
})();
</script>
</body>

</html>